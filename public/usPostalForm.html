<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>US Postal Calculator</title>
</head>
<body>
<form action="/getRate" method="get">
    Type: <select name="type">
    <option>Choose a Mailing Type</option>
    <option value="letters-stamped" data-max="3.5">Letters (Stamped)</option>
    <option value="letters-metered" data-max="3.5">Letters (Metered)</option>
    <option value="large-env" data-max="13">Large Envelopes (Flats)</option>
    <option value="first-class" data-max="13">First-Class Package Serviceâ€”Retail</option>
</select>
    Weight(oz): <input id="weight" type="number" step="0.1" name="weight" min="0">

    <input type="submit">
</form>

<h1 id="result"></h1>
</body>
<script>
    const select = document.getElementsByTagName("select")[0];
    select.addEventListener('change', function() {
        document.getElementById("weight").setAttribute('max', this.options[select.selectedIndex].getAttribute('data-max'));
    });

    // const form = document.forms['mail'];
    // form.addEventListener('submit', sendData, false);
    //
    // function sendData(event) {
    //     event.preventDefault();
    //     const mail = new FormData(form);
    //     const data = JSON.stringify(mail);
    //     const url = `http://echo.jsontest.com/id/1/title/${form.mail.value}`;
    //     const headers = new Headers({'Accept': 'application/json', 'Content-Type': 'application/json'});
    //     const request = new Request('/', {method: 'POST', mode: 'cors', header: headers, body: data})
    //     fetch(request).then(response => response.json()).then(task => console.log(`${task.title} saved with an id of ${task.id}`))
    //         .catch( error => console.log('There was an error:', error));
    // }
</script>
</html>
